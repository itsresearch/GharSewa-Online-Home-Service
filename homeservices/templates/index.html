{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>GharSewa - Home Repair</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <link href="{% static 'img/favicon.ico' %}" rel="icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <style>
        .star-rating .fa-star { 
            color: #ccc; 
            font-size: 18px; 
        }
        .star-rating .fa-star.checked { 
            color: #F47B44; 
        }
        /* Profile Dropdown Styles */
        .profile-dropdown .dropdown-toggle {
            padding: 0;
            border: none;
            background: transparent;
        }
        
        .profile-dropdown .profile-image {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #F47B44;
            transition: all 0.3s ease;
        }
        
        .profile-dropdown .dropdown-menu {
            margin-top: 0.5rem;
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            border-radius: 10px;
        }
        
        .profile-dropdown .dropdown-header {
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .profile-dropdown .dropdown-item {
            padding: 0.75rem 1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .profile-dropdown .dropdown-item:hover {
            background-color: rgba(244, 123, 68, 0.1);
            color: #F47B44;
        }
        
        .profile-dropdown .dropdown-item.text-danger:hover {
            background-color: rgba(220, 53, 69, 0.1);
        }
        
        .profile-dropdown .bi {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status"></div>
    </div>

    <nav id="navbar" class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-lg-0 fixed-top">
        <a href="{% url 'index' %}" class="navbar-brand d-flex align-items-center">
            <img src="{% static 'img/logo.png' %}" alt="GharSewa Logo" class="me-3" style="height: 90px; width: auto;">
        </a>
        <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto py-3 py-lg-0">
                <a href="{% url 'index' %}" class="nav-item nav-link">Home</a>
                <a href="{% url 'about' %}" class="nav-item nav-link">About Us</a>
                <a href="{% url 'service' %}" class="nav-item nav-link">Our Services</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                    <div class="dropdown-menu bg-light m-0">
                        <a href="{% url 'team' %}" class="dropdown-item">Our Team</a>
                        <a href="{% url 'testimonial' %}" class="dropdown-item">Testimonials</a>
                    </div>
                </div>
                <a href="{% url 'contact' %}" class="nav-item nav-link">Contact Us</a>
            </div>
            <div class="d-flex align-items-center ms-3">
                {% if user.is_authenticated %}
                    {% if user.is_staff %}
                        <a href="{% url 'admin:index' %}" class="me-3">
                            <div style="width: 35px; height: 35px; border-radius: 50%; overflow: hidden; cursor: pointer; border: 2px solid #F47B44;">
                                <img src="{% static 'img/pp.webp' %}" alt="Dashboard" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                        </a>
                    {% endif %}
                    <div class="dropdown profile-dropdown">
                        <button class="btn dropdown-toggle d-flex align-items-center" 
                                type="button" id="profileDropdown" data-bs-toggle="dropdown" 
                                aria-expanded="false">
                            {% if user.profile_photo %}
                                <img src="{{ user.profile_photo.url }}" 
                                     alt="{{ user.get_full_name }}" 
                                     class="profile-image">
                            {% else %}
                                <img src="{% static 'img/default-profile.png' %}" 
                                     alt="Profile" 
                                     class="profile-image">
                            {% endif %}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li class="dropdown-header">
                                <h6 class="mb-0">{{ user.get_full_name|default:user.username }}</h6>
                                <small class="text-muted">{{ user.email }}</small>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" href="{% url 'profile' %}">
                                    <i class="bi bi-person"></i> My Profile
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="{% url 'service_requests' %}">
                                    <i class="bi bi-list-check"></i> My Requests
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item text-danger" href="{% url 'logout' %}">
                                    <i class="bi bi-box-arrow-right"></i> Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                {% else %}
                    <a href="{% url 'signup' %}" class="btn text-white px-3" style="background-color: #F47B44; border-radius: 100px;">Sign Up</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container-fluid p-0 mb-5" id="carousel-container">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="w-100" src="{% static 'img/lastfix.png' %}" alt="Image" style="opacity: 1;">
                <div class="carousel-caption" style="background-color: rgba(0, 0, 0, 0);">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-12 col-lg-10 custom-caption-pos">
                                {% if user.is_authenticated %}
                                    <div id="welcome-message" class="animate__animated animate__fadeInLeft" style="margin-bottom: 50px;">
                                        <h2 style="color: #F47B44; font-weight: 900; font-family: 'Poppins', sans-serif; text-decoration: none;">
                                            Welcome, {{ user.first_name|default:user.username }}!
                                        </h2>
                                    </div>
                                {% endif %}
                                <h5 class="text-uppercase mb-3 animated slideInDown" style="font-size: 1.5rem; color: #1f4863;">Professional Home Services</h5>
                                <h1 class="display-2 mb-3 animated slideInDown" style="font-size: 3rem; color: black;">
                                    Painting, Plumbing <br> & Solutions
                                </h1>
                                <a href="{% url 'about' %}" class="btn btn-primary py-3 px-5" style="background-color: #F47B44; border-radius: 100px;">More Details</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section id="services" class="services py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Top Services</h2>
            <div class="row">
                <div class="col-md-3 mb-4">
                    <a href="{% if user.is_authenticated %}{% url 'painting' %}{% else %}{% url 'signup' %}?next={% url 'painting' %}{% endif %}" class="card-link">
                        <div class="card h-100 text-center p-4 service-card" style="background-image: url('{% static 'img/painter.jpeg' %}');">
                            <div class="card-overlay"></div>
                            <i class="fas fa-paint-roller fa-3x mb-3 text-white"></i>
                            <h3 class="text-white">Professional Painting</h3>
                            <p class="text-white">Interior & exterior painting services with premium quality materials</p>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 mb-4">
                    <a href="{% if user.is_authenticated %}{% url 'plastering' %}{% else %}{% url 'signup' %}?next={% url 'plastering' %}{% endif %}" class="card-link">
                        <div class="card h-100 text-center p-4 service-card" style="background-image: url('{% static 'img/plaster.jpg' %}');">
                            <div class="card-overlay"></div>
                            <i class="fas fa-tools fa-3x mb-3 text-white"></i>
                            <h3 class="text-white">Plastering & Renovation</h3>
                            <p class="text-white">Complete wall solutions and structural renovations</p>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 mb-4">
                    <a href="{% if user.is_authenticated %}{% url 'electrical' %}{% else %}{% url 'signup' %}?next={% url 'electrical' %}{% endif %}" class="card-link">
                        <div class="card h-100 text-center p-4 service-card" style="background-image: url('{% static 'img/electrician.jpg' %}');">
                            <div class="card-overlay"></div>
                            <i class="fas fa-bolt fa-3x mb-3 text-white"></i>
                            <h3 class="text-white">Electrical Works</h3>
                            <p class="text-white">Safe and modern electrical installations</p>
                        </div>
                    </a>
                </div>
                <div class="col-md-3 mb-4">
                    <a href="{% if user.is_authenticated %}{% url 'plumbing' %}{% else %}{% url 'signup' %}?next={% url 'plumbing' %}{% endif %}" class="card-link">
                        <div class="card h-100 text-center p-4 service-card" style="background-image: url('{% static 'img/plumber.png' %}');">
                            <div class="card-overlay"></div>
                            <i class="fas fa-faucet fa-3x mb-3 text-white"></i>
                            <h3 class="text-white">Plumbing Solutions</h3>
                            <p class="text-white">24/7 emergency plumbing services</p>
                        </div>
                    </a>
                </div>
            </div>
            <div class="row justify-content-center mt-4">
                <div class="col-md-3 text-center">
                    <a href="{% url 'service' %}" class="btn btn-primary btn-lg" style="background-color: #F47B44; border-radius: 100px;">More Services</a>
                </div>
            </div>
        </div>
    </section>
    
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="border-start border-5 border-primary ps-4 mb-5">
                        <h6 class="text-body text-uppercase mb-2">Why Choose Us!</h6>
                        <h1 class="display-6 mb-0">Your Trusted Online Home Service Partner</h1>
                    </div>
                    <p class="mb-5">
                        At <strong style="color:#F47B44;">GharSewa</strong>, we bring together a team of highly skilled and experienced professionals to provide top-notch home services. Even though we're new to the market, our experts have years of hands-on experience, ensuring you receive the best care for your home. We're here to make your life easier with reliable, affordable, and high-quality services.
                    </p>
                    <div class="row gy-5 gx-4">
                        <div class="col-sm-6 wow fadeIn" data-wow-delay="0.1s">
                            <div class="d-flex align-items-center mb-3">
                                <i class="fa fa-check fa-2x text-primary flex-shrink-0 me-3"></i>
                                <h6 class="mb-0">Skilled & Experienced Professionals</h6>
                            </div>
                            <span>Our team has years of expertise in home repairs, renovations, and maintenance.</span>
                        </div>
                        <div class="col-sm-6 wow fadeIn" data-wow-delay="0.2s">
                            <div class="d-flex align-items-center mb-3">
                                <i class="fa fa-check fa-2x text-primary flex-shrink-0 me-3"></i>
                                <h6 class="mb-0">Affordable & Transparent Pricing</h6>
                            </div>
                            <span>No hidden fees. We offer competitive rates tailored to your budget.</span>
                        </div>
                        <div class="col-sm-6 wow fadeIn" data-wow-delay="0.3s">
                            <div class="d-flex align-items-center mb-3">
                                <i class="fa fa-check fa-2x text-primary flex-shrink-0 me-3"></i>
                                <h6 class="mb-0">Quick & Reliable Service</h6>
                            </div>
                            <span>We value your time and ensure prompt service delivery.</span>
                        </div>
                        <div class="col-sm-6 wow fadeIn" data-wow-delay="0.4s">
                            <div class="d-flex align-items-center mb-3">
                                <i class="fa fa-check fa-2x text-primary flex-shrink-0 me-3"></i>
                                <h6 class="mb-0">100% Customer Satisfaction</h6>
                            </div>
                            <span>Your happiness is our priority. We go the extra mile to meet your expectations.</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="position-relative overflow-hidden ps-5 pt-5 h-100" style="min-height: 400px;">
                        <img class="position-absolute w-100 h-100" src="{% static 'img/exterior.png' %}" alt="Our Team" style="object-fit: cover;">
                        <div class="position-absolute top-0 start-0 bg-white pe-3 pb-3" style="width: 200px; height: 200px;">
                            <div class="d-flex flex-column justify-content-center text-center bg-primary h-100 p-3">
                                <h1 class="text-white">{{ testimonials.count }}+</h1>
                                <h2 class="text-white">Happy</h2>
                                <h5 class="text-white mb-0">Clients</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5 align-items-end mb-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="border-start border-5 border-primary ps-4">
                        <h6 class="text-body text-uppercase mb-2">Our Team</h6>
                        <h1 class="display-6 mb-0">Some Of Our Expert Workers</h1>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                    <p class="mb-0">Meet some of our highly skilled professionals dedicated to delivering top-quality home maintenance and repair services. With years of experience in plumbing, electrical work, carpentry, and more, our experts ensure reliability, efficiency, and customer satisfaction. Trust us to handle your home service needs with precision and care.</p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="team-item position-relative">
                        <img class="img-fluid" src="{% static 'img/pik6.webp' %}" alt="">
                        <div class="team-text p-4">
                            <h5 style="color: white;">Santosh Maharjan</h5>
                            <span style="color: white;">Plumber</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="team-item position-relative">
                        <img class="img-fluid" src="{% static 'img/pik8.jpg' %}" alt="">
                        <div class="team-text p-4">
                            <h5 style="color: white;">Bikash Sharma</h5>
                            <span style="color: white;">Painter</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="team-item position-relative">
                        <img class="img-fluid" src="{% static 'img/pik3.webp' %}" alt="">
                        <div class="team-text p-4">
                            <h5 style="color: white;">Deepak Bhandari</h5>
                            <span style="color: white;">Electrician</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5 align-items-end mb-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="border-start border-5 border-primary ps-4">
                        <h6 class="text-body text-uppercase mb-2">Testimonial</h6>
                        <h1 class="display-6 mb-0">What Our Happy Clients Say!</h1>
                    </div>
                </div>
                <div class="col-lg-6 text-center text-lg-end wow fadeInUp" data-wow-delay="0.3s">
                    <a href="{% url 'testimonial' %}" class="btn btn-primary btn-lg" style="background-color: #F47B44; border-radius: 100px;">Submit Your Feedback</a>
                </div>
            </div>
            <div class="row g-5">
                <div class="col-lg-5 wow fadeInUp" data-wow-delay="0.1s">
                    <p class="mb-4">We are committed to delivering top-quality home services with professionalism and care. Our clients trust us for reliable, efficient, and hassle-free solutions. See what they have to say about their experience!</p>
                    <div class="row g-4">
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center mb-2">
                                <i class="fa fa-users fa-2x text-primary flex-shrink-0"></i>
                                <h1 class="ms-3 mb-0">{{ testimonials.count }}+</h1>
                            </div>
                            <h5 class="mb-0">Happy Clients</h5>
                        </div>
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center mb-2">
                                <i class="fa fa-check fa-2x text-primary flex-shrink-0"></i>
                                <h1 class="ms-3 mb-0">{{ testimonials.count }}+</h1>
                            </div>
                            <h5 class="mb-0">Feedback Received</h5>
                        </div>
                    </div>
                </div>
                <div class="col-lg-7 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="owl-carousel testimonial-carousel">
                        {% for testimonial in testimonials %}
                            <div class="testimonial-item">
                                <p class="fs-5">{{ testimonial.comment }}</p>
                                <div class="star-rating mb-3">
                                    {% for i in "12345" %}
                                        <i class="fa fa-star {% if forloop.counter <= testimonial.rating %}checked{% endif %}"></i>
                                    {% endfor %}
                                </div>
                                <h5>{{ testimonial.name }}</h5>
                                <span>{{ testimonial.profession|default:"Client" }}</span>
                            </div>
                        {% empty %}
                            <div class="testimonial-item">
                                <p class="fs-5">No testimonials available yet. Be the first to share your experience!</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-dark footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h1 class="text-white mb-4"><i class="fa fa-building text-primary me-3"></i>GharSewa</h1>
                    <p>Best Service at Best Price.</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-square btn-outline-primary me-1" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-square btn-outline-primary me-1" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-square btn-outline-primary me-1" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-square btn-outline-primary me-0" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Address</h4>
                    <p><i class="fa fa-map-marker-alt me-3"></i>Minbhawan, Kathmandu</p>
                    <p><i class="fa fa-phone-alt me-3"></i>+01 0987654</p>
                    <p><i class="fa fa-envelope me-3"></i>info@gharsewa.com</p>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="text-light mb-4">Quick Links</h4>
                    <a class="btn btn-link" href="{% url 'about' %}">About Us</a>
                    <a class="btn btn-link" href="{% url 'contact' %}">Contact Us</a>
                    <a class="btn btn-link" href="{% url 'service' %}">Our Services</a>
                </div>
            </div>
        </div>
        <div class="container-fluid copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        Â© <a href="#">GharSewa</a>, All Right Reserved.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top" style="background-color: #F47B44; border-color: #F47B44; border-radius: 100px;">
        <i class="bi bi-arrow-up"></i>
    </a>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>