{% extends 'base.html' %} {% load static crispy_forms_tags %} {% block extra_css
%}
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Poppins:wght@600;700&display=swap"
  rel="stylesheet"
/>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
  rel="stylesheet"
/>
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
  rel="stylesheet"
/>
<link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet" />
<link
  href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}"
  rel="stylesheet"
/>
<style>
  .star-rating .fa-star {
    color: #ccc;
    font-size: 24px;
    cursor: pointer;
    transition: color 0.2s;
  }
  .star-rating .fa-star.checked,
  .star-rating .fa-star:hover,
  .star-rating .fa-star:hover ~ .fa-star {
    color: #f47b44;
  }
  .form-container {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .form-container .form-control:focus {
    border-color: #f47b44;
    box-shadow: 0 0 5px rgba(244, 123, 68, 0.5);
  }
  .btn-primary {
    background-color: #f47b44;
    border-color: #f47b44;
  }
  .btn-primary:hover {
    background-color: #e06a33;
    border-color: #e06a33;
  }
</style>
{% endblock %} {% block content %}
<div
  id="spinner"
  class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center"
>
  <div class="spinner-grow text-primary" role="status"></div>
</div>

<div
  class="container-fluid page-header py-5 mb-5 wow fadeIn"
  data-wow-delay="0.1s"
>
  <div class="container text-center py-5">
    <h1 class="display-4 text-white animated slideInDown mb-4">Testimonial</h1>
  </div>
</div>

<div class="container-xxl py-5">
  <div class="container">
    <div class="row g-5">
      <div class="col-lg-5 wow fadeInUp" data-wow-delay="0.1s">
        <div class="border-start border-5 border-primary ps-4 mb-5">
          <h6 class="text-body text-uppercase mb-2">Testimonial</h6>
          <h1 class="display-6 mb-0">What Our Happy Clients Say!</h1>
        </div>
        <p class="mb-4">
          We are committed to delivering top-quality home services with
          professionalism and care. Our clients trust us for reliable,
          efficient, and hassle-free solutions. See what they have to say about
          their experience!
        </p>
        <div class="row g-4">
          <div class="col-sm-6">
            <div class="d-flex align-items-center mb-2">
              <i class="fa fa-users fa-2x text-primary flex-shrink-0"></i>
              <h1 class="ms-3 mb-0">{{ testimonials.count }}+</h1>
            </div>
            <h5 class="mb-0">Happy Clients</h5>
          </div>
          <div class="col-sm-6">
            <div class="d-flex align-items-center mb-2">
              <i class="fa fa-check fa-2x text-primary flex-shrink-0"></i>
              <h1 class="ms-3 mb-0">{{ testimonials.count }}+</h1>
            </div>
            <h5 class="mb-0">Feedback Received</h5>
          </div>
        </div>
      </div>
      <div class="col-lg-7 wow fadeInUp" data-wow-delay="0.5s">
        {% if messages %}
        <div class="alert alert-info alert-dismissible fade show" role="alert">
          {% for message in messages %} {{ message }}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
          {% endfor %}
        </div>
        {% endif %} {% if user.is_authenticated %}
        <div class="mb-5 form-container">
          <h4 class="mb-4">Submit Your Feedback</h4>
          <form method="post">
            {% csrf_token %} {{ form.name|as_crispy_field }} {{
            form.profession|as_crispy_field }}
            <div class="mb-3">
              <label class="form-label">Rating</label>
              <div class="star-rating" id="star-rating">
                <i class="fa fa-star" data-value="1"></i>
                <i class="fa fa-star" data-value="2"></i>
                <i class="fa fa-star" data-value="3"></i>
                <i class="fa fa-star" data-value="4"></i>
                <i class="fa fa-star" data-value="5"></i>
              </div>
              {{ form.rating }}
            </div>
            {{ form.comment|as_crispy_field }}
            <button type="submit" class="btn btn-primary mt-3">
              Submit Testimonial
            </button>
          </form>
        </div>
        {% else %}
        <div class="mb-5">
          <p>
            Please <a href="{% url 'login' %}">log in</a> to submit a
            testimonial.
          </p>
        </div>
        {% endif %}
        <div class="owl-carousel testimonial-carousel">
          {% for testimonial in testimonials %}
          <div class="testimonial-item">
            <p class="fs-5">{{ testimonial.comment }}</p>
            <div class="star-rating mb-3">
              {% for i in "12345" %}
              <i
                class="fa fa-star {% if forloop.counter <= testimonial.rating %}checked{% endif %}"
              ></i>
              {% endfor %}
            </div>
            <h5>{{ testimonial.name }}</h5>
            <span>{{ testimonial.profession|default:"Client" }}</span>
          </div>
          {% empty %}
          <div class="testimonial-item">
            <p class="fs-5">
              No testimonials available yet. Be the first to share your
              experience!
            </p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'lib/wow/wow.min.js' %}"></script>
<script src="{% static 'lib/easing/easing.min.js' %}"></script>
<script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
<script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script>
  $(document).ready(function () {
    $('.star-rating i').on('click', function () {
      let rating = $(this).data('value')
      $('#id_rating').val(rating)
      $('.star-rating i').each(function () {
        if ($(this).data('value') <= rating) {
          $(this).addClass('checked')
        } else {
          $(this).removeClass('checked')
        }
      })
    })
    $('.star-rating i').hover(
      function () {
        let rating = $(this).data('value')
        $('.star-rating i').each(function () {
          if ($(this).data('value') <= rating) {
            $(this).addClass('checked')
          } else {
            $(this).removeClass('checked')
          }
        })
      },
      function () {
        let currentRating = $('#id_rating').val() || 0
        $('.star-rating i').each(function () {
          if ($(this).data('value') <= currentRating) {
            $(this).addClass('checked')
          } else {
            $(this).removeClass('checked')
          }
        })
      }
    )
  })
</script>
{% endblock %}
